<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–•–æ–∫–∫–µ–π–Ω–∞—è –ü–ª–æ—â–∞–¥–∫–∞</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑–æ–≤—É—é –≤–µ—Ä—Å–∏—é –±–µ–∑ UI -->
    <script src="https://unpkg.com/@tonconnect/sdk@2.2.0/dist/index.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f8ff;
            text-align: center;
        }
        #connect-wallet {
            padding: 12px 24px;
            font-size: 16px;
            background: #0088cc;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 20px 0;
        }
        #connect-wallet:hover {
            background: #006699;
        }
        .wallet-info {
            margin: 20px 0;
            padding: 15px;
            background: #e8f4fd;
            border-radius: 8px;
            display: none;
        }
        .error {
            color: red;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>üèí –•–æ–∫–∫–µ–π–Ω–∞—è –ü–ª–æ—â–∞–¥–∫–∞</h1>
    <p>–°–æ–±–∏—Ä–∞–π –∫–∞—Ä—Ç–æ—á–∫–∏ —Ö–æ–∫–∫–µ–∏—Å—Ç–æ–≤ –∏ —Å—Ä–∞–∂–∞–π—Å—è!</p>
    
    <button id="connect-wallet">–ü–æ–¥–∫–ª—é—á–∏—Ç—å TON –∫–æ—à–µ–ª–µ–∫</button>
    <div id="wallet-info" class="wallet-info">
        <p>‚úÖ –ö–æ—à–µ–ª–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω!</p>
        <p id="wallet-address">–ê–¥—Ä–µ—Å: </p>
    </div>
    <div id="error" class="error"></div>
    
    <div id="user-info"></div>

    <script>
        window.onload = function() {
            Telegram.WebApp.ready();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
            const initData = Telegram.WebApp.initDataUnsafe;
            if (initData.user) {
                document.getElementById('user-info').innerHTML = 
                    `<p>–ü—Ä–∏–≤–µ—Ç, ${initData.user.first_name}!</p>`;
            }
            
            console.log('Initializing TON Connect SDK');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
            if (typeof TonConnect !== 'undefined') {
                console.log('TonConnect SDK loaded successfully');
                
                // –°–æ–∑–¥–∞–µ–º –∏–Ω—Å—Ç–∞–Ω—Å TonConnect
                const connector = new TonConnect.TonConnect({
                    manifestUrl: 'https://daniilpupshev.github.io/hockey-nft-webapp/tonconnect-manifest.json'
                });
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
                document.getElementById('connect-wallet').addEventListener('click', async function() {
                    try {
                        console.log('Connecting wallet...');
                        document.getElementById('error').textContent = '';
                        
                        // –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, TonKeeper)
                        const wallet = await connector.connect({
                            jsBridgeKey: 'tonkeeper' // –∏–ª–∏ –¥—Ä—É–≥–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
                        });
                        
                        if (wallet && wallet.account) {
                            console.log('Wallet connected:', wallet);
                            document.getElementById('wallet-address').textContent = 
                                `–ê–¥—Ä–µ—Å: ${wallet.account.address}`;
                            document.getElementById('wallet-info').style.display = 'block';
                            document.getElementById('connect-wallet').style.display = 'none';
                        }
                        
                    } catch (error) {
                        console.error('Connection error:', error);
                        document.getElementById('error').textContent = 
                            '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ' + (error.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');
                    }
                });
                
            } else {
                console.error('TonConnect SDK not found');
                document.getElementById('error').textContent = '–ö–æ—à–µ–ª–µ–∫ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è';
            }
        };
    </script>
</body>
</html>
